<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>無料インスタグラムブログパーツ作成 - InstaWindowTool</title>
  <!-- UIkit CSS -->
  <link rel="stylesheet" href="/css/uikit.min.css" />

  <!-- UIkit JS -->
  <script src="/js/uikit.min.js"></script>
  <script src="/js/uikit-icons.min.js"></script>


  <script src='https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.22/vue.min.js'></script>
  <!-- 2019-01-25 https://cdnjs.com/libraries/vue -->
</head>

<body>
  <div class="uk-navbar-container">

    <nav class="uk-navbar uk-container" uk-navbar>

      <div class="uk-navbar-left">
        <ul class="uk-navbar-nav">
          <li class="uk-active">
            <h1 class="uk-text-lead"><a href="/">無料インスタグラムブログパーツ作成ツール InstaWindow</a></h1>
          </li>
        </ul>
      </div>

      <div class="uk-navbar-right">
        <ul class="uk-navbar-nav">
          <li class="uk-active">
            <a href="/about.html">About</a>
          </li>
        </ul>
      </div>
    </nav>
  </div>
  <div class="uk-container uk-margin" id="app">
    <div class="uk-child-width-expand@s" uk-grid>
      <div class="row">
        <h2 class="uk-text-lead">設定</h2>
        <div class="input-field col s12">
          <div class="uk-margin">
            <label class="uk-form-label" for="username">ユーザー名</label>
            <div class="uk-form-controls">
              <input v-model="username" id="username" type="text" class="uk-input" />
            </div>
          </div>

          <div class="uk-margin">
            <label class="uk-form-label" for="displayImageCount">表示画像数</label>
            <input v-model="displayImageCount" id="displayImageCount" type="number" class="uk-input" />
          </div>

          <div class="uk-margin">
            <label>
              <input type="checkbox" v-model="options.showIcon" class="uk-checkbox">
              <span class="uk-form-label">アイコンを表示</span>
            </label>
          </div>

          <div class="uk-margin">
            <label>
              <input type="checkbox" v-model="options.showBiography" class="uk-checkbox">
              <span class="uk-form-label">ユーザー紹介文を表示</span>
            </label>
          </div>

          <div class="uk-margin">
            <label>
              <input type="checkbox" v-model="options.showFollowBtn" class="uk-checkbox">
              <span class="uk-form-label">フォローボタンを表示</span>
            </label>
          </div>
          <div class="uk-margin">
            <label>
              <input type="checkbox" v-model="options.showUsername" class="uk-checkbox">
              <span class="uk-form-label">ユーザー名を表示</span>
            </label>
          </div>

        </div>
      </div>
      <div>
        <h2 class="uk-text-lead">プレビュー</h2>

        <div id="insta-widget" class="iswg-base" v-bind:data-username="username"
          v-bind:data-display-image-count="displayImageCount" v-bind:data-show-icon="String(options.showIcon)"
          v-bind:data-show-biography="String(options.showBiography)"
          v-bind:data-show-follow-btn="String(options.showFollowBtn)"
          v-bind:data-show-username="String(options.showUsername)">
        </div>


        <h2 class="uk-text-lead">コード</h2>
        <p>このコードを貼り付けて使用してください</p>
        <textarea id="iw-code" class="uk-textarea" rows="3" readonly>&lt;div id="insta-widget" class="iswg-base" data-username="{{username}}" data-display-image-count="{{displayImageCount}}" {{renderDataset}}&gt;&lt;/div&gt;
&lt;script src="{{location.origin}}/js/main.js"&gt;&lt;/script&gt;</textarea>
        <div>
          <button class="uk-button uk-button-primary" v-on:click="copy">コピーする</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    var app = new Vue({
      el: '#app',
      data: {
        username: 'akb48', // 取得対象のユーザー名
        displayImageCount: 9, // 表示する画像数
        options: {
          showIcon: true,
          showBiography: true,
          showFollowBtn: true,
          showUsername: true,
        }
      },
      updated: function () {
        window.instaWindow();
      },

      computed: {
        renderDataset: function () {
          var that = this;
          var optionArr = [];
          var options = this.options;
          ['showIcon', 'showBiography', 'showFollowBtn', 'showUsername'].forEach(function (key, index) {
            if (options[key] === false) {
              optionArr.push('data-' + that.kebabCase(key) + '=' + options[key]);
            }
          });
          return optionArr.join(' ')
        }
      },
      methods: {
        kebabCase: function (str) {
          return str.replace(/[A-Z]/g, function (s) {
            return '-' + s.charAt(0).toLowerCase();
          });
        },
        copy: function (e) {
          document.getElementById("iw-code").select();
          document.execCommand("copy");
        }
      },
    })
  </script>
  <script src="/js/main.js"></script>
</body>

</html>