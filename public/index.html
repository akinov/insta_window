<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>InstaWindowTool - インスタグラム表示用ガジェット</title>

    <script src='https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.22/vue.min.js'></script><!-- 2019-01-25 https://cdnjs.com/libraries/vue -->
  </head>
  <body>

  <div id="app">
    <div>
      これを貼り付けてね
      <pre>
        <code>
&lt;div id="insta-widget" class="iswg-base" data-username="{{username}}" data-display-image-count="{{displayImageCount}}" {{renderDataset}}&gt;&lt;/div&gt;
&lt;script src="{{location.origin}}/javascripts/main.js"&gt;&lt;/script&gt;
        </code>
      </pre>
      <input v-model="username" />
      <input v-model="displayImageCount" type="number" />
      <label>
        <input type="checkbox" v-model="options.showIcon">
        アイコンを表示
      </label>
      <label>
        <input type="checkbox" v-model="options.showBiography">
        ユーザー紹介文を表示
      </label>
      <label>
        <input type="checkbox" v-model="options.showFollowBtn">
        フォローボタンを表示
      </label>
      <label>
        <input type="checkbox" v-model="options.showUsername">
        ユーザー名を表示
      </label>
    </div>
  </div>

  <div id="insta-widget" class="iswg-base" data-username="akb48" data-display-image-count="9"></div>

  <script>
    var app = new Vue({
      el: '#app',
      data: {
        username: 'akb48', // 取得対象のユーザー名
        displayImageCount: 9, // 表示する画像数
        options: {
          showIcon: true,
          showBiography: true,
          showFollowBtn: true,
          showUsername: true,
        }
      },

      computed: {
        renderDataset: function () {
          var that = this;
          var optionArr = [];
          var options = this.options;
          ['showIcon', 'showBiography', 'showFollowBtn', 'showUsername'].forEach(function (key, index) {
            if (options[key] === false) {
              optionArr.push('data-' + that.kebabCase(key) + '=' + options[key]);
            }
          });
          return optionArr.join(' ')
        }
      },
      methods: {
        kebabCase: function (str) {
          return str.replace(/[A-Z]/g, function(s){
            return '-' + s.charAt(0).toLowerCase();
          });
        }
      },
    })
  </script>
  <script src="/javascripts/main.js?a=1&b=3"></script>
  </body>
</html>
